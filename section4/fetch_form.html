<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fetch_form</title>
</head>
<body>
    <form id="post_form"><!-- Ajax通信の場合はJS側にメソッドを指定するのでhtmlには指定しなくでおk -->
        氏名    <input type="text" name="your_name" value="氏名"><br>
        コメント<input type="text" name="comment" value="コメント"><br>
        <button id = 'button' type="submit">送信！</button>
    </form>

    <script>
 
        const postForm = document.getElementById('post_form');
        const formData = new FormData(postForm);
        console.log(formData);
        
        // for (let data of formData){
        //     console.log(data);
        // }
        // ⏬
        // for (let fd of formData.entries()){
        //     console.log(fd[0]+ ':' + fd[1]);
        // }

        const btn = document.getElementById('button');
        btn.addEventListener('click', () => {
            const postForm = document.forms.post_form;
            const formData = new FormData(postForm);
            const url = 'https://coinbaby8.com/udemy_js_api/api/udemy_js';
            const post_options = {
                method:'post',
                body:formData,
            };

            fetch(url,post_options)
            .then(response => {
                if (response.ok){
                    return response.text();
                }else{
                    return new Error('通信に失敗しました');
                }
            })
            .then(text => console.log(text))
            .catch(e => console.error(e));
        })
    </script>
</body>
</html>